{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\nconst API_KEY = '43934597-0c0c0c0c0c0c0c0c0c0c0c0c0c0c0c0c0c'\nconst BASE_URL = 'https://pixabay.com/api/'\n\nexport async function getImagesByQuery(query, page = 1) {\n\tconst params = {\n\t\tkey: API_KEY,\n\t\tq: query,\n\t\timage_type: 'photo',\n\t\torientation: 'horizontal',\n\t\tsafesearch: true,\n\t\tpage: page,\n\t\tper_page: 40,\n\t}\n\n\ttry {\n\t\tconst response = await axios.get(BASE_URL, { params })\n\t\treturn response.data\n\t} catch (error) {\n\t\tthrow new Error('Failed to fetch images')\n\t}\n}\n","import SimpleLightbox from 'simplelightbox'\nimport 'simplelightbox/dist/simple-lightbox.min.css'\n\nconst loader = document.querySelector('.loader')\nconst gallery = document.querySelector('.gallery')\nconst loadMoreBtn = document.querySelector('.load-more-btn')\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n\tcaptionsData: 'alt',\n\tcaptionDelay: 250,\n})\n\nfunction createGallery(images) {\n\tconst markup = images\n\t\t.map(\n\t\t\t({\n\t\t\t\twebformatURL,\n\t\t\t\tlargeImageURL,\n\t\t\t\ttags,\n\t\t\t\tlikes,\n\t\t\t\tviews,\n\t\t\t\tcomments,\n\t\t\t\tdownloads,\n\t\t\t}) => `\n\t\t\t\t<li class=\"gallery-item\">\n\t\t\t\t\t<a href=\"${largeImageURL}\">\n\t\t\t\t\t\t<img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n\t\t\t\t\t\t<div class=\"image-inform\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h3 class=\"image-inform-title\">Likes</h3>\n\t\t\t\t\t\t\t\t<p class=\"image-inform-text\">${likes}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h3 class=\"image-inform-title\">Views</h3>\n\t\t\t\t\t\t\t\t<p class=\"image-inform-text\">${views}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h3 class=\"image-inform-title\">Comments</h3>\n\t\t\t\t\t\t\t\t<p class=\"image-inform-text\">${comments}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h3 class=\"image-inform-title\">Downloads</h3>\n\t\t\t\t\t\t\t\t<p class=\"image-inform-text\">${downloads}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t`\n\t\t)\n\t\t.join('')\n\n\tgallery.insertAdjacentHTML('beforeend', markup)\n\tlightbox.refresh()\n}\n\nfunction clearGallery() {\n\tgallery.innerHTML = ''\n}\n\nfunction showLoader() {\n\tloader.classList.remove('hidden')\n}\n\nfunction hideLoader() {\n\tloader.classList.add('hidden')\n}\n\nfunction showLoadMore() {\n\tloadMoreBtn.classList.remove('hidden')\n}\n\nfunction hideLoadMore() {\n\tloadMoreBtn.classList.add('hidden')\n}\n\nfunction scrollToNewPhotos() {\n\tconst { height: cardHeight } = document\n\t\t.querySelector('.gallery-item')\n\t\t.getBoundingClientRect()\n\n\twindow.scrollBy({\n\t\ttop: cardHeight * 2,\n\t\tbehavior: 'smooth',\n\t})\n}\n\nexport {\n\tclearGallery,\n\tcreateGallery,\n\thideLoadMore,\n\thideLoader,\n\tscrollToNewPhotos,\n\tshowLoadMore,\n\tshowLoader,\n}\n","import iziToast from 'izitoast'\nimport 'izitoast/dist/css/iziToast.min.css'\nimport { getImagesByQuery } from './js/pixabay-api'\nimport {\n\tclearGallery,\n\tcreateGallery,\n\thideLoadMore,\n\thideLoader,\n\tscrollToNewPhotos,\n\tshowLoadMore,\n\tshowLoader,\n} from './js/render-functions'\n\nconst searchForm = document.querySelector('.search-form')\nconst loadMoreBtn = document.querySelector('.load-more-btn')\n\nlet currentPage = 1\nlet currentQuery = ''\n\nsearchForm.addEventListener('submit', async event => {\n\tevent.preventDefault()\n\tcurrentPage = 1\n\tcurrentQuery = event.target.searchQuery.value.trim()\n\n\tif (!currentQuery) {\n\t\tiziToast.error({\n\t\t\ttitle: 'Error',\n\t\t\tmessage: 'Please enter a search query',\n\t\t\tposition: 'topRight',\n\t\t})\n\t\treturn\n\t}\n\n\tclearGallery()\n\thideLoadMore()\n\tshowLoader()\n\n\ttry {\n\t\tconst images = await getImagesByQuery(currentQuery, currentPage)\n\n\t\tif (images.hits.length === 0) {\n\t\t\tiziToast.info({\n\t\t\t\ttitle: 'Info',\n\t\t\t\tmessage:\n\t\t\t\t\t'Sorry, there are no images matching your search query. Please try again!',\n\t\t\t\tposition: 'topRight',\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tcreateGallery(images.hits)\n\n\t\tif (images.totalHits > currentPage * 40) {\n\t\t\tshowLoadMore()\n\t\t}\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\ttitle: 'Error',\n\t\t\tmessage:\n\t\t\t\t'An error occurred while fetching images. Please try again later.',\n\t\t\tposition: 'topRight',\n\t\t})\n\t} finally {\n\t\thideLoader()\n\t}\n})\n\nloadMoreBtn.addEventListener('click', async () => {\n\tcurrentPage += 1\n\tshowLoader()\n\n\ttry {\n\t\tconst images = await getImagesByQuery(currentQuery, currentPage)\n\t\tcreateGallery(images.hits)\n\t\tscrollToNewPhotos()\n\n\t\tif (images.totalHits <= currentPage * 40) {\n\t\t\thideLoadMore()\n\t\t\tiziToast.info({\n\t\t\t\ttitle: 'Info',\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t\tposition: 'topRight',\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tiziToast.error({\n\t\t\ttitle: 'Error',\n\t\t\tmessage:\n\t\t\t\t'An error occurred while loading more images. Please try again later.',\n\t\t\tposition: 'topRight',\n\t\t})\n\t} finally {\n\t\thideLoader()\n\t}\n})\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","loader","gallery","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMore","hideLoadMore","scrollToNewPhotos","cardHeight","searchForm","currentPage","currentQuery","event","iziToast"],"mappings":"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"}